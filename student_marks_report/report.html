<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Attendance and Marks</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <h1>Attendance and Marks</h1>

    <label for="attendance">Attendance Percentage:</label>
    <input type="number" id="attendance" placeholder="Enter attendance percentage">

    <br>

    <label for="subject1">Subject 1 Marks:</label>
    <input type="number" id="subject1" placeholder="Enter marks for Subject 1">

    <br>

    <label for="subject2">Subject 2 Marks:</label>
    <input type="number" id="subject2" placeholder="Enter marks for Subject 2">

    <br>

    <label for="subject3">Subject 3 Marks:</label>
    <input type="number" id="subject3" placeholder="Enter marks for Subject 3">

    <br>

    <label for="subject4">Subject 4 Marks:</label>
    <input type="number" id="subject4" placeholder="Enter marks for Subject 4">

    <br>

    <button onclick="calculate()">Calculate and Show Graphs</button>

    <div id="graphs"></div>

    <script>
        function calculate() {
            const attendance = parseFloat(document.getElementById("attendance").value) || 0;
            const subject1 = parseFloat(document.getElementById("subject1").value) || 0;
            const subject2 = parseFloat(document.getElementById("subject2").value) || 0;
            const subject3 = parseFloat(document.getElementById("subject3").value) || 0;
            const subject4 = parseFloat(document.getElementById("subject4").value) || 0;

            const attendanceData = [{
                type: 'pie',
                labels: ['Present', 'Absent'],
                values: [attendance, 100 - attendance],
                textinfo: 'label+percent',
                textposition: 'inside',
                automargin: true
            }];

            const marksData = [{
                x: ['Subject 1', 'Subject 2', 'Subject 3', 'Subject 4'],
                y: [subject1, subject2, subject3, subject4],
                type: 'bar'
            }];

            const overallPercentage = ((subject1 + subject2 + subject3 + subject4) / 4).toFixed(2);

            const overallPercentageData = [{
                type: 'indicator',
                mode: 'gauge+number',
                value: overallPercentage,
                title: { text: 'Overall Percentage', font: { size: 18 } },
                gauge: {
                    axis: { range: [null, 100], tickwidth: 1, tickcolor: 'darkblue' },
                    bar: { color: 'darkblue' },
                    bgcolor: 'white',
                    borderwidth: 2,
                    bordercolor: 'gray',
                    steps: [
                        { range: [0, 50], color: 'red' },
                        { range: [50, 80], color: 'yellow' },
                        { range: [80, 100], color: 'green' }
                    ],
                }
            }];

            Plotly.newPlot('graphs', attendanceData, { title: 'Attendance Percentage' });
            Plotly.newPlot('graphs', marksData, { title: 'Subject-wise Marks' });
            Plotly.newPlot('graphs', overallPercentageData);
        }
    </script>
</body>
</html>
